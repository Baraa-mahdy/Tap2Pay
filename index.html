<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tap2Pay - Arduino Science Fair Project</title>
    <link rel="icon" href="Create a futuristic .png" type="image/x-icon">
    
    <!-- Firebase SDK v8 (simpler for HTML files) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    
    <style>
        /* ==================== RESET & VARIABLES ==================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* ===== PRIMARY COLOR (SINGLE SOURCE OF TRUTH) ===== */
            --primary-color: #FF3B3B;
            --primary-rgb: 255, 59, 59;
            
            /* ===== STATUS COLORS ===== */
            --color-success: #28a745;
            --color-warning: #ffc107;
            --color-error: #dc3545;
            
            /* ===== BACKGROUND COLORS ===== */
            --bg-main: #0f0f0f;
            --bg-main-alt: #1a1a1a;
            --bg-card: #2a2a2a;
            --bg-card-hover: #333333;
            --bg-input: #1a1a1a;
            --bg-sidebar: rgba(26, 26, 26, 0.95);
            
            /* ===== TEXT COLORS (UNIFIED) ===== */
            --text-color: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.7);
            --text-muted: rgba(255, 255, 255, 0.5);
            --text-light: rgba(255, 255, 255, 0.4);
            
            /* ===== LEGACY ALIASES (for compatibility) ===== */
            --text-primary: #ffffff;
            --section-text-color: #ffffff;
            
            /* ===== BORDER COLORS (derived from primary) ===== */
            --border-color: rgba(var(--primary-rgb), 0.2);
            --border-color-light: rgba(var(--primary-rgb), 0.1);
            --border-color-dark: rgba(var(--primary-rgb), 0.3);
            
            /* ===== SHADOWS ===== */
            --shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            --shadow-light: 0 5px 20px rgba(0, 0, 0, 0.1);
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.15);
            
            /* ===== PRIMARY COLOR SHADOWS (for hover effects) ===== */
            --shadow-sm: 0 0 10px rgba(var(--primary-rgb), 0.3);
            --shadow-md: 0 0 15px rgba(var(--primary-rgb), 0.3);
            --shadow-lg: 0 0 20px rgba(var(--primary-rgb), 0.4);
            --shadow-xl: 0 10px 30px rgba(var(--primary-rgb), 0.2);
            --shadow-pulse: 0 0 0 0 rgba(var(--primary-rgb), 0.7);
            
            /* ===== GLOW EFFECTS (all from primary) ===== */
            --glow: 0 0 20px rgba(var(--primary-rgb), 0.5);
            --glow-sm: 0 0 10px rgba(var(--primary-rgb), 0.4);
            --glow-lg: 0 0 30px rgba(var(--primary-rgb), 0.6);
            
            /* ===== TRANSITIONS ===== */
            --transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            --transition-fast: all 0.2s ease;
            
            /* ===== OPACITY ===== */
            --opacity-hover: 0.8;
            --opacity-disabled: 0.5;
        }

        /* ==================== BODY & GLOBALS ==================== */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--bg-main) 0%, var(--bg-main-alt) 50%, #0a0a0a 100%);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* ==================== LANGUAGE TOGGLE ==================== */
        .lang-toggle {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: var(--primary-color);
            opacity: 0.9;
            color: var(--text-primary);
            border: 2px solid var(--bg-main);
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            font-size: 14px;
            box-shadow: var(--shadow-light);
            transition: var(--transition);
            z-index: 1000;
        }

        .lang-toggle:hover {
            transform: translateY(-2px);
            box-shadow: var(--glow);
        }

        /* ==================== CUSTOM SCROLLBAR ==================== */
        /* Webkit browsers (Chrome, Safari, Edge) */
        ::-webkit-scrollbar {
            width: 12px;
            height: 12px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-main);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 10px;
            border: 2px solid var(--bg-main);
            transition: all 0.3s ease;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-color);
            box-shadow: var(--glow);
        }

        ::-webkit-scrollbar-thumb:active {
            background: var(--primary-color);
        }

        /* Firefox */
        * {
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) var(--bg-main);
        }

        /* ==================== CONTAINER & LAYOUT ==================== */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        /* ==================== HEADER SECTION ==================== */
        .header {
            text-align: center;
            margin-bottom: 60px;
            animation: fadeInDown 0.8s ease-out;
        }

        .title {
            font-size: 4rem;
            font-weight: 900;
            color: var(--primary-color);
            letter-spacing: 3px;
            margin-bottom: 10px;
            text-transform: uppercase;
            animation: fadeInDown 0.8s ease-out, float 3s ease-in-out infinite;
        }

        .subtitle {
            font-size: 1rem;
            font-style: italic;
            color: var(--text-muted);
            letter-spacing: 1px;
            animation: fadeIn 1.2s ease-out 0.3s both;
        }

        /* ==================== MAIN LAYOUT ==================== */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 60px;
        }

        /* ==================== LEFT COLUMN - COMPONENTS ==================== */
        .components-section {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .section-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
            animation: slideInLeft 0.6s ease-out;
        }

        .component-card {
            background: linear-gradient(135deg, var(--bg-card) 0%, #1f1f1f 100%);
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: var(--transition);
            overflow: hidden;
            position: relative;
            box-shadow: var(--shadow-light);
            animation: slideInLeft 0.6s ease-out;
            animation-fill-mode: both;
        }

        .component-card:nth-child(1) { animation-delay: 0.1s; }
        .component-card:nth-child(2) { animation-delay: 0.2s; }
        .component-card:nth-child(3) { animation-delay: 0.3s; }
        .component-card:nth-child(4) { animation-delay: 0.4s; }
        .component-card:nth-child(5) { animation-delay: 0.5s; }

        .component-card:hover {
            border-color: var(--primary-color);
            box-shadow: var(--glow), var(--shadow);
            transform: translateY(-3px);
        }

        .component-card.expanded {
            background: var(--primary-color);
            box-shadow: var(--glow), var(--shadow);
        }

        .component-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .component-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--section-text-color);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .component-card.expanded .component-title {
            color: var(--section-text-color);
        }

        .arrow-icon {
            font-size: 1.5rem;
            transition: var(--transition);
            color: var(--primary-color);
        }

        .component-card:hover .arrow-icon {
            color: var(--primary-color);
        }

        .component-card.expanded .arrow-icon {
            transform: rotate(180deg);
            color: var(--text-color);
        }

        .component-description {
            margin-top: 0;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out, margin-top 0.5s ease-out;
            color: var(--section-text-color);
            line-height: 1.6;
            opacity: 0;
        }

        .component-card.expanded .component-description {
            max-height: 300px;
            margin-top: 15px;
            opacity: 1;
            animation: slideDown 0.5s ease-out;
        }

        /* ==================== RIGHT COLUMN - HOW IT WORKS ==================== */
        .right-column {
            display: flex;
            flex-direction: column;
            gap: 40px;
        }

        .how-it-works {
            background: linear-gradient(135deg, var(--bg-card) 0%, #2a2a2a 100%);
            border-radius: 12px;
            padding: 30px;
            box-shadow: var(--shadow-light);
            border-left: 4px solid var(--primary-color);
            animation: slideInRight 0.6s ease-out;
            margin-top: 40px;
        }

        .how-it-works-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 25px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .steps-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .step {
            display: flex;
            gap: 15px;
            align-items: flex-start;
            padding: 15px;
            background: rgba(var(--primary-rgb), 0.05);
            border-radius: 8px;
            transition: var(--transition);
            animation: fadeInUp 0.6s ease-out;
            animation-fill-mode: both;
        }

        .step:nth-child(1) { animation-delay: 0.5s; }
        .step:nth-child(2) { animation-delay: 0.6s; }
        .step:nth-child(3) { animation-delay: 0.7s; }
        .step:nth-child(4) { animation-delay: 0.8s; }
        .step:nth-child(5) { animation-delay: 0.9s; }

        .step:hover {
            background: rgba(var(--primary-rgb), 0.1);
            transform: translateX(5px);
        }

        .step-number {
            min-width: 35px;
            height: 35px;
            background: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.9rem;
            color: var(--text-color);
            flex-shrink: 0;
            box-shadow: var(--glow-sm);
        }

        .step-text {
            font-size: 0.95rem;
            line-height: 1.5;
            color: var(--section-text-color);
            padding-top: 2px;
        }

        /* ==================== KEY FEATURES ==================== */
        .key-features {
            background: linear-gradient(135deg, rgba(42, 42, 42, 0.8) 0%, rgba(26, 26, 26, 0.8) 100%);
            border-radius: 16px;
            padding: 50px 40px;
            box-shadow: var(--shadow);
            margin-left: auto;
            margin-right: auto;
            animation: fadeInUp 0.8s ease-out 0.4s both;
            border: 1px solid var(--border-color-light);
            max-width: 82%;
        }

        .features-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 25px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .features-list {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 20px;
        }

        .feature-item {
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
            text-align: center;
            padding: 25px 20px;
            border-radius: 12px;
            transition: var(--transition);
            animation: fadeInUp 0.6s ease-out;
            animation-fill-mode: both;
            background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.08) 0%, rgba(var(--primary-rgb), 0.02) 100%);
            border: 2px solid transparent;
            box-shadow: none;
        }

        .feature-item:nth-child(1) { animation-delay: 0.5s; }
        .feature-item:nth-child(2) { animation-delay: 0.6s; }
        .feature-item:nth-child(3) { animation-delay: 0.7s; }
        .feature-item:nth-child(4) { animation-delay: 0.8s; }
        .feature-item:nth-child(5) { animation-delay: 0.9s; }

        .feature-item:hover {
            background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.15) 0%, rgba(var(--primary-rgb), 0.08) 100%);
            transform: translateY(-5px);
            border: 2px solid var(--primary-color);
            box-shadow: var(--glow), var(--shadow-lg);
        }

        .feature-icon {
            font-size: 2.5rem;
            color: var(--section-text-color);
            min-width: auto;
            text-align: center;
        }

        .feature-text {
            font-size: 0.85rem;
            color: var(--section-text-color);
            line-height: 1.5;
        }

        .feature-title {
            font-size: 0.95rem;
            font-weight: 700;
            color: var(--section-text-color);
            margin-bottom: 5px;
        }

        /* ==================== ANIMATIONS ==================== */
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes pulse {
            0% {
                box-shadow: var(--shadow-primary-pulse);
            }
            70% {
                box-shadow: 0 0 0 15px rgba(var(--color-primary-rgb), 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(var(--color-primary-rgb), 0);
            }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ==================== FEEDBACK BUTTON ==================== */
        .feedback-btn {
            position: fixed;
            bottom: 40px;
            right: 40px;
            background: var(--primary-color);
            color: var(--text-color);
            border: none;
            border-radius: 50px;
            padding: 16px 28px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            box-shadow: var(--shadow);
            transition: var(--transition);
            animation: pulse 2s infinite, float 3s ease-in-out infinite;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 100;
        }

        .feedback-btn:hover {
            transform: translateY(-5px);
            box-shadow: var(--glow), var(--shadow);
        }

        .feedback-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: var(--primary-color);
            color: var(--text-color);
            border-radius: 50%;
            min-width: 24px;
            height: 24px;
            font-size: 0.75rem;
            font-weight: 900;
            margin-left: 5px;
        }

        /* ==================== MODAL OVERLAY ==================== */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 200;
            animation: fadeIn 0.3s ease-out;
        }

        .modal-overlay.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* ==================== MODAL CONTENT ==================== */
        .modal-content {
            background: linear-gradient(135deg, #2a2a2a 0%, #1f1f1f 100%);
            border-radius: 16px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: var(--shadow);
            animation: scaleIn 0.4s ease-out;
            border: 1px solid var(--border-color);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            border-bottom: 2px solid rgba(var(--primary-rgb), 0.3);
            padding-bottom: 15px;
        }

        .modal-title {
            font-size: 1.8rem;
            font-weight: 900;
            color: var(--primary-color);
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--primary-color);
            font-size: 2rem;
            cursor: pointer;
            transition: var(--transition);
            padding: 0;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            transform: rotate(90deg);
            color: var(--white);
        }

        /* ==================== FORM ELEMENTS ==================== */
        .feedback-form {
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary-color);
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .form-input,
        .form-textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid rgba(var(--primary-rgb), 0.3);
            border-radius: 8px;
            background: rgba(var(--primary-rgb), 0.05);
            color: var(--white);
            font-family: inherit;
            font-size: 0.95rem;
            transition: var(--transition);
        }

        .form-input:focus,
        .form-textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 15px rgba(var(--primary-rgb), 0.3);
            background: rgba(var(--primary-rgb), 0.08);
        }

        .form-textarea {
            resize: vertical;
            min-height: 120px;
            font-family: 'Courier New', monospace;
        }

        .submit-btn {
            background: var(--primary-color);
            color: var(--text-color);
            border: none;
            border-radius: 8px;
            padding: 14px 30px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            text-transform: uppercase;
            letter-spacing: 1px;
            width: 100%;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--glow), var(--shadow-light);
        }

        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .loading-spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top-color: var(--white);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin-right: 8px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* ==================== SUCCESS MESSAGE ==================== */
        .success-message {
            display: none;
            background: rgba(var(--primary-rgb), 0.2);
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            color: var(--primary-color);
            font-weight: 600;
            animation: slideUp 0.4s ease-out;
        }

        .success-message.show {
            display: block;
        }

        /* ==================== ERROR MESSAGE ==================== */
        .error-message {
            display: none;
            background: rgba(var(--primary-rgb), 0.2);
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            color: var(--primary-color);
            font-weight: 600;
            animation: slideUp 0.4s ease-out;
        }

        .error-message.show {
            display: block;
        }

        /* ==================== GREETING MESSAGE ==================== */
        .greeting-message {
            display: none;
            background: rgba(33, 150, 243, 0.2);
            border: 2px solid #2196F3;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            color: #2196F3;
            font-weight: 600;
            animation: slideUp 0.4s ease-out;
        }

        .greeting-message.show {
            display: block;
        }

        /* ==================== COMMENTS SECTION ==================== */
        .comments-section {
            margin-top: 35px;
            padding-top: 25px;
            border-top: 2px solid rgba(var(--primary-rgb), 0.3);
        }

        .comments-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .comments-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-height: 300px;
            overflow-y: auto;
        }

        .comment-card {
            background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.08) 0%, rgba(var(--primary-rgb), 0.02) 100%);
            border: 1px solid rgba(var(--primary-rgb), 0.2);
            border-radius: 8px;
            padding: 15px;
            animation: slideUp 0.5s ease-out;
            animation-fill-mode: both;
        }

        .comment-card:nth-child(1) { animation-delay: 0.1s; }
        .comment-card:nth-child(2) { animation-delay: 0.2s; }
        .comment-card:nth-child(3) { animation-delay: 0.3s; }

        .comment-text {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 8px;
        }

        .comment-date {
            font-size: 0.75rem;
            color: var(--text-muted);
            font-style: italic;
        }

        .no-comments {
            text-align: center;
            color: #888;
            padding: 20px;
            font-style: italic;
        }

        /* ==================== ADMIN PANEL ==================== */
        .admin-panel {
            display: none;
            margin-top: 35px;
            padding-top: 25px;
            border-top: 2px solid rgba(var(--primary-rgb), 0.3);
        }

        .admin-panel.active {
            display: block;
        }

        .admin-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: #ffd700;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .pending-item {
            background: rgba(var(--primary-rgb), 0.1);
            border: 1px solid rgba(var(--primary-rgb), 0.3);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            animation: slideUp 0.5s ease-out;
        }

        .pending-text {
            color: #ddd;
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 10px;
        }

        .pending-meta {
            font-size: 0.75rem;
            color: #888;
            margin-bottom: 12px;
        }

        .admin-buttons {
            display: flex;
            gap: 10px;
        }

        .approve-btn,
        .decline-btn {
            flex: 1;
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            font-size: 0.85rem;
            transition: var(--transition);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .approve-btn {
            background: #4caf50;
            color: white;
        }

        .approve-btn:hover {
            background: #45a049;
            transform: translateY(-2px);
        }

        .decline-btn {
            background: #f44336;
            color: white;
        }

        .decline-btn:hover {
            background: #da190b;
            transform: translateY(-2px);
        }

        /* ==================== ADMIN LOGIN MODAL ==================== */
        .admin-login-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 10000;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .admin-login-modal.active {
            display: flex;
            opacity: 1;
        }

        .admin-login-box {
            background: linear-gradient(135deg, #2a2a2a 0%, #1f1f1f 100%);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            max-width: 450px;
            width: 90%;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .admin-login-modal.active .admin-login-box {
            transform: scale(1);
        }

        .admin-login-title {
            font-size: 1.8rem;
            color: #ffd700;
            text-align: center;
            margin-bottom: 30px;
            font-weight: 700;
        }

        .admin-login-input {
            width: 100%;
            padding: 15px;
            margin-bottom: 20px;
            border: 2px solid #444;
            border-radius: 10px;
            background: #1a1a1a;
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .admin-login-input:focus {
            outline: none;
            border-color: #ffd700;
            box-shadow: 0 0 15px rgba(var(--primary-rgb), 0.3);
        }

        .admin-login-buttons {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }

        .admin-login-submit {
            flex: 1;
            padding: 15px;
            background: var(--primary-color);
            color: var(--text-color);
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .admin-login-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(var(--primary-rgb), 0.4);
        }

        .admin-login-cancel {
            flex: 1;
            padding: 15px;
            background: #444;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .admin-login-cancel:hover {
            background: #555;
            transform: translateY(-2px);
        }

        /* ==================== RESPONSIVE DESIGN ==================== */
        @media (max-width: 1366px) and (min-width: 1024px) {
            .container {
                max-width: 1100px;
                padding: 40px 30px;
            }

            .title {
                font-size: 3.2rem;
            }

            .main-content {
                gap: 30px;
            }

            .components-section {
                gap: 12px;
            }

            .how-it-works {
                margin-top: 40px;
                padding: 26px;
            }

            .features-list {
                grid-template-columns: repeat(3, 1fr);
                gap: 18px;
            }

            .feature-text {
                font-size: 0.8rem;
            }
        }

        @media (max-width: 1024px) and (min-width: 769px) {
            .main-content {
                gap: 25px;
            }

            .features-list {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .feedback-btn {
                bottom: 30px;
                right: 30px;
                padding: 14px 20px;
                font-size: 0.85rem;
            }

            .modal-content {
                padding: 30px 20px;
                max-width: 95%;
            }

            .modal-title {
                font-size: 1.5rem;
            }

            .comments-list {
                max-height: 250px;
            }

            .main-content {
                grid-template-columns: 1fr;
                gap: 30px;
            }

            .title {
                font-size: 2.5rem;
            }

            .section-title,
            .how-it-works-title,
            .features-title {
                font-size: 1.3rem;
            }

            .component-title {
                font-size: 1.1rem;
            }

            .features-list {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }

            .container {
                padding: 30px 15px;
            }
        }

        @media (max-width: 480px) {
            .feedback-btn {
                bottom: 20px;
                right: 20px;
                padding: 12px 16px;
                font-size: 0.75rem;
            }

            .modal-content {
                padding: 20px 15px;
                max-width: 100%;
            }

            .modal-title {
                font-size: 1.2rem;
            }

            .comments-list {
                max-height: 200px;
            }

            .title {
                font-size: 2rem;
                letter-spacing: 1px;
            }

            .subtitle {
                font-size: 0.85rem;
            }

            .section-title {
                font-size: 1.1rem;
            }

            .component-title {
                font-size: 1rem;
            }

            .how-it-works,
            .key-features {
                padding: 20px;
            }

            .features-list {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .feature-item {
                padding: 18px 15px;
            }

            .feature-icon {
                font-size: 2rem;
            }

            .step-number {
                min-width: 30px;
                height: 30px;
                font-size: 0.8rem;
            }

            .step-text {
                font-size: 0.85rem;
            }

            .feature-text {
                font-size: 0.8rem;
            }
        }

        /* ==================== FOOTER ==================== */
        .footer {
            text-align: center;
            margin-top: 60px;
            padding-top: 30px;
            border-top: 1px solid rgba(var(--primary-rgb), 0.2);
            color: #888;
            font-size: 0.9rem;
            animation: fadeIn 1.5s ease-out 1s both;
        }

        .footer a {
            color: var(--primary-color);
            text-decoration: none;
            transition: var(--transition);
        }

        .footer a:hover {
            text-decoration: underline;
        }

        /* ==================== AUTHENTICATION STYLES ==================== */
        .auth-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 50%, #0a0a0a 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 5000;
            opacity: 1;
            visibility: visible;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .auth-screen.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .auth-box {
            background: linear-gradient(135deg, #2a2a2a 0%, #1f1f1f 100%);
            padding: 50px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.7);
            max-width: 500px;
            width: 90%;
            animation: scaleIn 0.5s ease;
        }

        .auth-title {
            font-size: 2.2rem;
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 15px;
            font-weight: 900;
        }

        .auth-subtitle {
            text-align: center;
            color: #aaa;
            margin-bottom: 40px;
            font-size: 0.95rem;
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .auth-input {
            padding: 15px;
            border: 2px solid #444;
            border-radius: 10px;
            background: #1a1a1a;
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .auth-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 15px rgba(var(--primary-rgb), 0.3);
        }

        .auth-button {
            padding: 15px;
            background: var(--primary-color);
            color: var(--text-color);
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .auth-button:hover {
            transform: translateY(-2px);
            box-shadow: var(--glow-lg);
        }

        .auth-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .auth-error {
            color: var(--primary-color);
            text-align: center;
            font-size: 0.9rem;
            display: none;
        }

        .auth-error.show {
            display: block;
        }

        .restricted-content {
            text-align: center;
            padding: 60px 20px;
        }

        .restricted-title {
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .restricted-message {
            font-size: 1.1rem;
            color: #ccc;
            margin-bottom: 40px;
            line-height: 1.6;
        }

        .logout-btn-sidebar {
            width: 100%;
            background: var(--primary-color);
            color: var(--text-color);
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin: 10px 0;
            box-shadow: var(--shadow-md);
        }

        .logout-btn-sidebar:hover {
            background: var(--primary-color);
            box-shadow: var(--glow);
            transform: translateY(-2px);
        }

        .logout-btn-sidebar:active {
            transform: translateY(0);
        }

        .logout-btn-sidebar .icon {
            font-size: 1.1rem;
        }

        .sidebar-divider {
            height: 1px;
            background: rgba(var(--primary-rgb), 0.2);
            margin: 10px 0;
        }

        .content {
            display: none;
        }

        .content.visible {
            display: block;
        }

        /* ==================== BLUR EFFECT FOR RESTRICTED CONTENT ==================== */
        .text-wrapper {
            position: relative;
            display: block;
        }

        .blurred-text {
            filter: blur(5px);
            pointer-events: none;
            user-select: none;
        }

        .restricted-label {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--primary-color);
            font-weight: 900;
            font-size: 0.9rem;
            letter-spacing: 2px;
            text-transform: uppercase;
            white-space: nowrap;
            text-shadow: 0 0 10px rgba(0, 0, 0, 1), 0 0 20px rgba(var(--primary-rgb), 0.8);
            pointer-events: none;
            z-index: 10;
        }

        /* ==================== SIDEBAR STYLING ==================== */
        .hamburger-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--primary-color);
            color: var(--text-color);
            border: none;
            padding: 12px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 24px;
            z-index: 999;
            transition: all 0.3s ease;
        }

        .hamburger-btn:hover {
            transform: scale(1.1);
            box-shadow: var(--glow);
        }

        .sidebar {
            position: fixed;
            left: -350px;
            top: 0;
            width: 350px;
            height: 100vh;
            background: linear-gradient(135deg, rgba(42, 42, 42, 0.95) 0%, rgba(26, 26, 26, 0.95) 100%);
            backdrop-filter: blur(10px);
            box-shadow: 4px 0 30px rgba(0, 0, 0, 0.5);
            border-right: 1px solid rgba(var(--primary-rgb), 0.2);
            padding: 20px;
            overflow-y: auto;
            transition: left 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            z-index: 998;
        }

        .sidebar.active {
            left: 0;
        }

        .sidebar-header {
            text-align: center;
            padding: 20px 0;
            border-bottom: 1px solid rgba(var(--primary-rgb), 0.2);
            margin-bottom: 20px;
        }

        .user-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            margin: 0 auto 15px;
            box-shadow: var(--glow-sm);
        }

        .sidebar-username {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 8px;
            color: white;
        }

        .role-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: bold;
            text-transform: uppercase;
        }

        .role-badge.admin {
            background: var(--primary-color);
            color: var(--text-color);
        }

        .role-badge.team {
            background: linear-gradient(135deg, #4caf50, #66bb6a);
            color: white;
        }

        .role-badge.visitor {
            background: linear-gradient(135deg, #2196F3, #42a5f5);
            color: white;
        }

        .sidebar-menu {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .sidebar-menu li {
            margin-bottom: 0;
        }

        .sidebar-menu a {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            color: #ddd;
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .sidebar-menu a:hover {
            background: rgba(var(--primary-rgb), 0.2);
            color: var(--primary-color);
            transform: translateX(5px);
        }

        .sidebar-menu a.active {
            background: rgba(var(--primary-rgb), 0.3);
            color: var(--primary-color);
            border-left: 3px solid var(--primary-color);
        }

        .sidebar-menu .icon {
            font-size: 18px;
            min-width: 24px;
        }

        .sidebar-divider {
            height: 1px;
            background: rgba(var(--primary-rgb), 0.2);
            margin: 20px 0;
        }

        .settings-panel {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(26, 26, 26, 0.98) 100%);
            padding: 20px;
            overflow-y: auto;
            animation: slideInRight 0.3s ease-out;
        }

        .settings-panel.active {
            display: block;
        }

        .settings-header {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }

        .settings-header:hover {
            opacity: 0.8;
        }

        .settings-group {
            margin-bottom: 25px;
            padding: 15px;
            background: rgba(var(--primary-rgb), 0.05);
            border-radius: 8px;
            border-left: 3px solid rgba(var(--primary-rgb), 0.3);
        }

        .settings-group h4 {
            color: var(--primary-color);
            font-size: 0.95rem;
            margin-bottom: 12px;
            text-transform: uppercase;
        }

        .toggle-switch {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 0;
        }

        .toggle-switch label {
            color: #ddd;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 26px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: 0.4s;
            border-radius: 26px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--primary-color);
        }

        input:checked + .slider:before {
            transform: translateX(24px);
        }

        .color-picker-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .color-input-wrapper {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 6px;
        }

        .color-input-wrapper label {
            color: #ddd;
            font-size: 0.9rem;
        }

        .color-input-wrapper input[type="color"] {
            width: 50px;
            height: 40px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }

        .reset-btn {
            width: 100%;
            padding: 10px;
            background: rgba(var(--primary-rgb), 0.3);
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            margin-top: 15px;
        }

        .reset-btn:hover {
            background: var(--primary-color);
            color: white;
        }

        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 997;
            animation: fadeIn 0.3s ease-out;
        }

        .sidebar-overlay.active {
            display: block;
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(-10px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        /* Dark Mode */
        body.dark-mode {
            --primary-red: #FF3B3B;
            --dark-gray: #1a1a1a;
            --light-gray: #f5f5f5;
        }

        body.light-mode {
            --primary-red: #D32F2F;
            --dark-gray: #f5f5f5;
            --light-gray: #1a1a1a;
            --text-primary: #f5f5f5;
            --text-secondary: #555;
            --bg-primary: #f5f5f5;
            --bg-secondary: #ffffff;
            --section-text-color: #ffffff;
            background: linear-gradient(135deg, #f5f5f5 0%, #ffffff 50%, #eeeeee 100%);
            color: var(--text-primary);
        }

        body.light-mode .sidebar {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(245, 245, 245, 0.95) 100%);
            border-right: 1px solid rgba(211, 47, 47, 0.2);
            color: var(--text-primary);
        }

        body.light-mode .sidebar-menu a {
            color: var(--text-secondary);
        }

        body.light-mode .sidebar-menu a:hover {
            background: rgba(211, 47, 47, 0.1);
            color: #D32F2F;
        }

        body.light-mode .auth-screen,
        body.light-mode .modal-content,
        body.light-mode .modal-overlay {
            background: white;
            color: var(--text-primary);
        }
        
        /* Additional light mode text styling */
        body.light-mode h1,
        body.light-mode h2,
        body.light-mode h3,
        body.light-mode h4,
        body.light-mode h5,
        body.light-mode h6 {
            color: var(--text-primary);
        }
        
        body.light-mode p,
        body.light-mode span,
        body.light-mode a,
        body.light-mode div,
        body.light-mode label {
            color: var(--text-primary);
        }
        
        body.light-mode .comment-item,
        body.light-mode .suggestion-item {
            background: #f9f9f9;
            border-color: #ddd;
        }
        
        body.light-mode .auth-input,
        body.light-mode input[type="text"],
        body.light-mode input[type="password"],
        body.light-mode textarea,
        body.light-mode select {
            background: #f5f5f5;
            color: var(--text-primary);
            border-color: #ddd;
        }
        
        body.light-mode .auth-input::placeholder,
        body.light-mode textarea::placeholder {
            color: #999;
        }

    </style>
    
    <!-- Early theme loading script to prevent flicker -->
    <script>
        (function() {
            // Helper function to convert hex to RGB
            function hexToRgb(hex) {
                const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
                return result ? `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}` : '255, 59, 59';
            }
            
            const defaultTheme = {
                primaryColor: '#FF3B3B',
                darkMode: true
            };
            
            const storedTheme = localStorage.getItem('userTheme');
            const theme = storedTheme ? JSON.parse(storedTheme) : defaultTheme;
            
            // Apply theme immediately with unified single primary color system
            const primaryRgb = hexToRgb(theme.primaryColor);
            document.documentElement.style.setProperty('--primary-color', theme.primaryColor);
            document.documentElement.style.setProperty('--primary-rgb', primaryRgb);
            document.documentElement.style.setProperty('--shadow-sm', `0 0 10px rgba(${primaryRgb}, 0.3)`);
            document.documentElement.style.setProperty('--shadow-md', `0 0 15px rgba(${primaryRgb}, 0.3)`);
            document.documentElement.style.setProperty('--shadow-lg', `0 0 20px rgba(${primaryRgb}, 0.4)`);
            document.documentElement.style.setProperty('--shadow-xl', `0 10px 30px rgba(${primaryRgb}, 0.2)`);
            document.documentElement.style.setProperty('--shadow-pulse', `0 0 0 0 rgba(${primaryRgb}, 0.7)`);
            document.documentElement.style.setProperty('--glow', `0 0 20px rgba(${primaryRgb}, 0.5)`);
            document.documentElement.style.setProperty('--glow-sm', `0 0 10px rgba(${primaryRgb}, 0.4)`);
            document.documentElement.style.setProperty('--glow-lg', `0 0 30px rgba(${primaryRgb}, 0.6)`);
            document.documentElement.style.setProperty('--border-color', `rgba(${primaryRgb}, 0.2)`);
            document.documentElement.style.setProperty('--border-color-light', `rgba(${primaryRgb}, 0.1)`);
            document.documentElement.style.setProperty('--border-color-dark', `rgba(${primaryRgb}, 0.3)`);
            
            if (theme.darkMode) {
                if (document.body) document.body.classList.add('dark-mode');
                document.documentElement.style.setProperty('--text-color', '#ffffff');
                document.documentElement.style.setProperty('--text-primary', '#ffffff');
                document.documentElement.style.setProperty('--text-secondary', 'rgba(255, 255, 255, 0.7)');
                document.documentElement.style.setProperty('--bg-main', '#0f0f0f');
                document.documentElement.style.setProperty('--bg-main-alt', '#1a1a1a');
                document.documentElement.style.setProperty('--section-text-color', '#ffffff');
            } else {
                if (document.body) document.body.classList.add('light-mode');
                // LIGHT MODE: ALL TEXT MUST BE WHITE
                document.documentElement.style.setProperty('--text-color', '#ffffff');
                document.documentElement.style.setProperty('--text-primary', '#ffffff');
                document.documentElement.style.setProperty('--text-secondary', '#ffffff');
                document.documentElement.style.setProperty('--text-muted', '#ffffff');
                document.documentElement.style.setProperty('--text-light', '#ffffff');
                document.documentElement.style.setProperty('--bg-main', '#f5f5f5');
                document.documentElement.style.setProperty('--bg-main-alt', '#ffffff');
                document.documentElement.style.setProperty('--section-text-color', '#ffffff');
            }
        })();
    </script>
</head>
<body>
    <!-- Hamburger Menu Button -->
    <button class="hamburger-btn" id="hamburgerBtn"></button>

    <!-- Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Sidebar Navigation -->
    <div class="sidebar" id="sidebar">
        <!-- Sidebar Header -->
        <div class="sidebar-header">
            <div class="user-avatar" id="userAvatarSidebar"></div>
            <div class="sidebar-username" id="sidebarUsername">User</div>
            <span class="role-badge" id="sidebarRoleBadge">Visitor</span>
        </div>

        <!-- Main Menu -->
        <ul class="sidebar-menu" id="sidebarMenu">
            <li><a href="#home" class="menu-item" data-item="home"><span class="icon"></span> Home</a></li>
            <li><a href="#components" class="menu-item" data-item="components"><span class="icon"></span> Main Components</a></li>
            <li><a href="#how-it-works" class="menu-item" data-item="how-it-works"><span class="icon"></span> How It Works</a></li>
            <li><a href="#features" class="menu-item" data-item="features"><span class="icon"></span> Key Features</a></li>
            <li><a href="#updates" class="menu-item" data-item="updates"><span class="icon"></span> Project Updates</a></li>
            <li><a href="#settings" class="menu-item settings-link" data-item="settings"><span class="icon"></span> Settings</a></li>
        </ul>

        <div class="sidebar-divider"></div>

        <!-- Settings Panel -->
        <div class="settings-panel" id="settingsPanel">
            <div class="settings-header">
                <span></span> Settings
            </div>

            <!-- Dark Mode Toggle -->
            <div class="settings-group">
                <h4>Display</h4>
                <div class="toggle-switch">
                    <label>Dark Mode</label>
                    <label class="switch">
                        <input type="checkbox" id="darkModeToggle">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>

            <!-- Color Theme Customization -->
            <div class="settings-group">
                <h4>Theme Color</h4>
                <div class="color-picker-group">
                    <div class="color-input-wrapper">
                        <label>Primary Color</label>
                        <input type="color" id="primaryColorPicker" value="#FF3B3B">
                    </div>
                </div>
                <button class="reset-btn" id="resetThemeBtn">Reset to Default</button>
            </div>
        </div>

        <!-- Logout Button -->
        <div class="sidebar-divider" id="logoutDivider" style="display: none; margin-top: auto;"></div>
        <button id="sidebarLogout" class="logout-btn-sidebar" style="display: none;">
            <span class="icon"></span> Logout
        </button>
    </div>

    <!-- Authentication Screen -->
    <div class="auth-screen" id="authScreen">
        <div class="auth-box">
            <h1 class="auth-title">Tap2Pay</h1>
            <p class="auth-subtitle">Sign in to access the project</p>
            <form class="auth-form" id="authForm">
                <select id="authRole" class="auth-input" required>
                    <option value="">Select Role</option>
                    <option value="Admin">Admin</option>
                    <option value="Team">Team</option>
                    <option value="Visitor">Visitor</option>
                </select>
                <input type="text" id="authName" class="auth-input" placeholder="Your Name" required>
                <input type="password" id="authPassword" class="auth-input" placeholder="Password" required>
                <button type="submit" class="auth-button" id="authSubmitBtn">Sign In</button>
                <div class="auth-error" id="authError"></div>
            </form>
        </div>
    </div>

    <!-- Main Content (Hidden until authenticated) -->
    <div class="content" id="mainContent">
    <!-- Header Section -->
    <div class="container">
        <div class="header">
            <h1 class="title">Tap2Pay</h1>
            <p class="subtitle">By Zeyad, Zuhair, Baraa | Arduino Science Fair Project</p>
        </div>

        <!-- Main Content: Two Column Layout -->
        <div class="main-content">
            <!-- Left Column: Components -->
            <div class="components-section">
                <h2 class="section-title">Main Components</h2>

                <!-- Component 1: Arduino Uno R3 -->
                <div class="component-card">
                    <div class="component-header">
                        <span class="component-title">Arduino Uno R3</span>
                        <span class="arrow-icon"></span>
                    </div>
                    <p class="component-description">The Arduino Uno R3 is the main controller of the entire Tap2Pay system. It manages communication between all hardware components, processes button input, receives data from the NFC reader, updates the OLED screen, and sends control signals to the servo motor. It also supplies power and ensures stable operation of the whole project.</p>
                </div>

                <!-- Component 2: NFC Card Reader -->
                <div class="component-card">
                    <div class="component-header">
                        <span class="component-title">NFC Card Reader</span>
                        <span class="arrow-icon"></span>
                    </div>
                    <p class="component-description">The NFC card reader detects NFC cards when they are placed near it. It reads stored information from the card and can write new data such as updated balance values. Each card acts like a digital wallet inside the system.</p>
                </div>

                <!-- Component 3: OLED Screen -->
                <div class="component-card">
                    <div class="component-header">
                        <span class="component-title">OLED Screen</span>
                        <span class="arrow-icon"></span>
                    </div>
                    <p class="component-description">The OLED screen displays all user interface elements. It shows menu options, balance amount, confirmations, and system messages, giving real-time feedback to the Card.</p>
                </div>

                <!-- Component 4: Tactile Push Buttons -->
                <div class="component-card">
                    <div class="component-header">
                        <span class="component-title">Tactile Push Buttons</span>
                        <span class="arrow-icon"></span>
                    </div>
                    <p class="component-description">Two tactile buttons allow navigation. The red button scrolls down through menu options. The green button confirms and selects options. This creates simple and intuitive control.</p>
                </div>

                <!-- Component 5: SG90 Servo Motor -->
                <div class="component-card">
                    <div class="component-header">
                        <span class="component-title">SG90 Servo Motor</span>
                        <span class="arrow-icon"></span>
                    </div>
                    <p class="component-description">The SG90 servo motor controls a small physical barrier. When the OPEN BARRIER option is selected, the servo rotates to lift the barrier, allowing the mini car to pass, then closes again.</p>
                </div>
            </div>

            <!-- Right Column: How It Works & Key Features -->
            <div class="right-column">
                <!-- How It Works Section -->
                <div class="how-it-works">
                    <h2 class="how-it-works-title" data-en="How It Works" data-ar=" ">How It Works</h2>
                    <div class="steps-list">
                       
                        <div class="step">
                            <div class="step-number">1</div>
                            <div class="step-text" data-en="OLED Screen displays menu: CHECK BALANCE, ADD MONEY, PAY MONEY, and OPEN BARRIER." data-ar="  OLED :         .">OLED Screen displays menu: CHECK BALANCE, ADD MONEY, PAY MONEY, and OPEN BARRIER.</div>
                        </div>
                        <div class="step">
                            <div class="step-number">2</div>
                            <div class="step-text" data-en="Use buttons to navigate: Red button to go down, Green button to select." data-ar="  :  =   = .">Use buttons to navigate: Red = DOWN, Green = OK.</div>
                        </div>
                        <div class="step">
                            <div class="step-number">3</div>
                            <div class="step-text" data-en="Choose Options From The 4 Options CHECK BALANCE, ADD MONEY, PAY MONEY, and OPEN BARRIER." data-ar="   :         .">Choose Options From The 4 Options CHECK BALANCE, ADD MONEY, PAY MONEY, and OPEN BARRIER.</div>
                        </div>
                        <div class="step">
                            <div class="step-number">4</div>
                            <div class="step-text" data-en="After that follow the instructions on the screen depending on what option you choose." data-ar="          .">After that follow the instructions on the screen depending on what option you choose.</div>
                        </div>
                    </div>
                </div>
            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Key Features Section - Full Width Below Main Content -->
        <div class="key-features">
            <h2 class="features-title" data-en="Key Features" data-ar=" ">Key Features</h2>
            <div class="features-list">
                <div class="feature-item">
                    <span class="feature-icon"></span>
                    <div>
                        <div class="feature-title" data-en="Interactive NFC Menu" data-ar=" NFC ">Interactive NFC Menu</div>
                        <span class="feature-text" data-en="Contactless card recognition with instant response." data-ar="       .">Contactless card recognition with instant response.</span>
                    </div>
                </div>
                <div class="feature-item">
                    <span class="feature-icon"></span>
                    <div>
                        <div class="feature-title" data-en="Balance Simulation" data-ar=" ">Balance Simulation</div>
                        <span class="feature-text" data-en="Add, Pay, and track digital wallet funds in real-time." data-ar="        .">Add, Pay, and track digital wallet funds in real-time.</span>
                    </div>
                </div>
                <div class="feature-item">
                    <span class="feature-icon"></span>
                    <div>
                        <div class="feature-title" data-en="Gate Control System" data-ar="   ">Gate Control System</div>
                        <span class="feature-text" data-en="Motorized barrier opens with servo activation." data-ar="     .">Motorized barrier opens with servo activation.</span>
                    </div>
                </div>
                <div class="feature-item">
                    <span class="feature-icon"></span>
                    <div>
                        <div class="feature-title" data-en="Two-Button Navigation" data-ar=" ">Two-Button Navigation</div>
                        <span class="feature-text" data-en="Simple red and green button menu control." data-ar="     .">Simple red and green button menu control.</span>
                    </div>
                </div>
                <div class="feature-item">
                    <span class="feature-icon"></span>
                    <div>
                        <div class="feature-title" data-en="OLED Feedback" data-ar="  OLED">OLED Feedback</div>
                        <span class="feature-text" data-en="Crystal-clear display of all user interactions." data-ar="     .">Crystal-clear display of all user interactions.</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p> Science Fair Project | Arduino-Powered NFC Payment System</p>
            <p style="margin-top: 10px; font-size: 0.8rem;"> 2026 Tap2Pay Project | All Rights Reserved</p>
        </div>
    </div>
    </div>

    <!-- Feedback Button -->
    </div>

    <button class="feedback-btn" id="feedbackBtn">
        <span class="feedback-text" data-en=" Updates" data-ar=" "> Updates</span>
        <span class="feedback-badge" id="badgeCount" style="display: none;">0</span>
    </button>

    <!-- Feedback Modal -->
    <div class="modal-overlay" id="feedbackModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" data-en="Project Updates" data-ar=" ">Project Updates</h2>
                <button class="modal-close" id="closeModal">&times;</button>
            </div>

            <div class="error-message" id="errorMessage"></div>
            <div class="success-message" id="successMessage" data-en=" Your suggestion has been submitted for review!" data-ar="    !"> Your suggestion has been submitted for review!</div>
            <div class="greeting-message" id="greetingMessage" data-en=" Hello! Thanks for reaching out. How can we help you today?" data-ar=" !   .    "> Hello! Thanks for reaching out. How can we help you today?</div>

            <!-- Feedback Form -->
            <form class="feedback-form" id="feedbackForm">
                <div class="form-group">
                    <label class="form-label" for="suggestionTitle" data-en="Your Name or Title" data-ar="  ">Your Name or Title</label>
                    <input type="text" id="suggestionTitle" class="form-input" placeholder="e.g., Feature Idea, Bug Report" required>
                </div>

                <div class="form-group">
                    <label class="form-label" for="suggestionText" data-en="Your Suggestion or Update" data-ar="  ">Your Suggestion or Update</label>
                    <textarea id="suggestionText" class="form-textarea" placeholder="Share your ideas, suggestions, or updates..." required></textarea>
                </div>

                <button type="submit" class="submit-btn" id="submitBtn" data-en="Submit Suggestion" data-ar=" ">
                    <span class="loading-spinner" id="spinner" style="display: none;"></span>
                    Submit Suggestion
                </button>
            </form>

            <!-- Comments Section -->
            <div class="comments-section">
                <h3 class="comments-title" data-en="All Submissions" data-ar=" ">All Submissions</h3>
                <div class="comments-list" id="commentsList">
                    <div class="no-comments">No updates yet. Be the first to suggest!</div>
                </div>
            </div>

            <!-- Admin Panel -->
            <div class="admin-panel" id="adminPanel">
                <h3 class="admin-title"> Admin Panel</h3>
                <div id="pendingSubmissions"></div>
                <button class="decline-btn" id="logoutAdmin" style="width: auto; margin-top: 15px;">Logout Admin</button>
            </div>
        </div>
    </div>

    <!-- Admin Login Modal -->
    <div class="admin-login-modal" id="adminLoginModal">
        <div class="admin-login-box">
            <h2 class="admin-login-title"> Login</h2>
            <select id="roleSelect" class="admin-login-input" required>
                <option value="">Select Role</option>
                <option value="Admin">Admin</option>
                <option value="Team">Team</option>
                <option value="Visitor">Visitor</option>
            </select>
            <input type="text" id="userName" class="admin-login-input" placeholder="Your Name" required>
            <input type="password" id="adminPassword" class="admin-login-input" placeholder="Password" required>
            <div class="admin-login-buttons">
                <button class="admin-login-submit" id="adminLoginSubmit">Login</button>
                <button class="admin-login-cancel" id="adminLoginCancel">Cancel</button>
            </div>
        </div>
    </div>

    <!-- JavaScript for Interactivity -->
    <script>
        // ==================== COMPONENT CARD ACCORDION ==================== //
        const componentCards = document.querySelectorAll('.component-card');

        componentCards.forEach(card => {
            card.addEventListener('click', function() {
                // Check if this card is already expanded
                const isExpanded = this.classList.contains('expanded');

                // Close all other cards
                componentCards.forEach(c => {
                    if (c !== this) {
                        c.classList.remove('expanded');
                    }
                });

                // Toggle current card
                this.classList.toggle('expanded');
            });
        });

        // ==================== TRANSLATION SYSTEM ==================== //
        let currentLang = localStorage.getItem('lang') || 'en';

        const translations = {
            en: {
                authSubtitle: 'Sign in to access the project',
                selectRole: 'Select Role',
                roleAdmin: 'Admin',
                roleTeam: 'Team',
                roleVisitor: 'Visitor',
                yourName: 'Your Name',
                password: 'Password',
                signIn: 'Sign In',
                subtitle: 'By Zeyad, Zuhair, Baraa | Arduino Science Fair Project',
                mainComponents: 'Main Components',
                howItWorks: 'How It Works',
                keyFeatures: 'Key Features',
                aboutProject: 'About This Project',
                teamUpdates: 'Team Updates',
                adminPanel: 'Admin Panel',
                pendingSubmissions: 'Pending Submissions',
                allComments: 'All Comments & Suggestions',
                shareFeedback: 'Share Your Feedback',
                arduinoTitle: 'Arduino Uno R3',
                arduinoDesc: 'The Arduino Uno R3 is the main controller of the entire Tap2Pay system. It manages communication between all hardware components, processes button input, receives data from the NFC reader, updates the OLED screen, and sends control signals to the servo motor. It also supplies power and ensures stable operation of the whole project.',
                nfcTitle: 'NFC Card Reader',
                nfcDesc: 'The NFC (Near Field Communication) reader enables contactless card reading. It scans payment cards and mobile wallets at close range, detects card presence, reads secure card data, and sends this information to the Arduino for verification. This is what makes Tap2Pay truly \"tap-and-go.\"',
                servoTitle: 'Servo Motor',
                servoDesc: 'The Servo Motor physically opens and closes the payment gate. When a successful payment is detected, the Arduino commands the servo to rotate 90 degrees (opening the gate). After a set delay, the servo returns to its original position, closing the gate until the next payment.',
                oledTitle: 'OLED Screen',
                oledDesc: 'The OLED display provides real-time visual feedback to the user. It shows messages like \"Tap Your Card,\" \"Payment Successful,\" and \"Access Granted\" (or denied). The screen helps users understand what the system is doing at every step.',
                buttonTitle: 'Push Button',
                buttonDesc: 'The push button gives manual control for testing and override. It can manually trigger the gate, test system responses, and reset the display. Its useful during development, demos, and for admin control.',
                breadboardTitle: 'Breadboard',
                breadboardDesc: 'The breadboard is where all components are physically connected. It acts as a central hub linking the Arduino, NFC reader, servo motor, OLED, button, and power rails. It makes prototyping easier without needing to solder components permanently.',
                step1: 'System Initialization',
                step1Desc: 'When powered on, the Arduino initializes all connected components (NFC reader, OLED screen, servo motor). The OLED displays a welcome message or \"Ready\" status.',
                step2: 'Waiting for Card Tap',
                step2Desc: 'The system enters a standby mode. The NFC reader actively listens for a nearby card or mobile device. The OLED prompts the user to \"Tap Your Card.\"',
                step3: 'Card Detection & Verification',
                step3Desc: 'When a card is tapped, the NFC reader reads the unique card ID. The Arduino checks if the card is authorized (pre-registered in code or database). The OLED updates to show \"Processing...\"',
                step4: 'Gate Opens',
                step4Desc: 'If the card is authorized, the OLED shows \"Access Granted.\" The Arduino sends a signal to the servo motor, which rotates to open the physical gate (allowing entry).',
                step5: 'Automatic Gate Close',
                step5Desc: 'After a few seconds (adjustable delay), the Arduino signals the servo to return to its original position, closing the gate. The system resets and waits for the next tap.',
                feature1: 'Contactless Payment',
                feature1Desc: 'Pay instantly by tapping your NFC-enabled card or smartphoneno swiping or inserting required.',
                feature2: 'Automated Access Control',
                feature2Desc: 'Servo motor automatically opens the gate when payment is verified, then closes after a set delay.',
                feature3: 'Real-Time Visual Feedback',
                feature3Desc: 'The OLED screen shows live status updates like \"Tap Card,\" \"Processing,\" \"Access Granted,\" or \"Denied.\"',
                feature4: 'Manual Override Button',
                feature4Desc: 'Push button allows manual testing and control for admins or debugging purposes.',
                feature5: 'Expandable System',
                feature5Desc: 'The modular design allows easy addition of Wi-Fi logging, database integration, multiple readers, or app connectivity.',
                feature6: 'Low-Cost & DIY-Friendly',
                feature6Desc: 'Built entirely with affordable, beginner-friendly Arduino componentsperfect for science fair projects or learning electronics.',
                aboutText1: 'Tap2Pay is an Arduino-based contactless payment and access control system designed by students for a science fair project. It demonstrates how NFC technology can be used to create real-world applications like automated toll booths, parking gates, or secure entry systems.',
                aboutText2: 'This project combines hardware (Arduino, NFC reader, servo motor, OLED display) with software logic to create a functional prototype. Its a great example of Internet of Things (IoT) principles, embedded systems programming, and practical engineering.',
                projectBy: ' 2024 Tap2Pay - Arduino Project by Zeyad, Zuhair, and Baraa',
                noComments: 'No comments yet. Be the first to share your thoughts!',
                commentTitle: 'Comment Title',
                commentText: 'Your comment...',
                submitComment: 'Submit Comment',
                reply: 'Reply',
                postReply: 'Post Reply',
                deleteBtn: 'Delete',
                approveBtn: 'Approve',
                declineBtn: 'Decline',
                pendingStatus: 'Pending',
                approvedStatus: 'Approved',
                rejectedStatus: 'Rejected',
                noPendingSubmissions: 'No pending submissions',
                noSubmissions: 'No submissions yet',
                firebaseNotConfigured: 'Firebase not configured. Comments are disabled.',
                logout: 'Logout'
            },
            ar: {
                authSubtitle: '    ',
                selectRole: ' ',
                roleAdmin: '',
                roleTeam: '',
                roleVisitor: '',
                yourName: '',
                password: ' ',
                signIn: ' ',
                subtitle: '     |    ',
                mainComponents: ' ',
                howItWorks: ' ',
                keyFeatures: ' ',
                aboutProject: '  ',
                teamUpdates: ' ',
                adminPanel: ' ',
                pendingSubmissions: ' ',
                allComments: '  ',
                shareFeedback: ' ',
                arduinoTitle: '  R3',
                arduinoDesc: '  R3     Tap2Pay .              NFC   OLED      .        .',
                nfcTitle: '  NFC',
                nfcDesc: '  NFC (  )    .                     .    Tap2Pay  \" \".',
                servoTitle: ' ',
                servoDesc: '       .         90  ( ).             .',
                oledTitle: ' OLED',
                oledDesc: '  OLED      .    \" \" \" \" \"  \" ( ).           .',
                buttonTitle: ' ',
                buttonDesc: '      .          .        .',
                breadboardTitle: ' ',
                breadboardDesc: '          .       NFC   OLED   .           .',
                step1: ' ',
                step1Desc: '        ( NFC  OLED  ).  OLED     \"\".',
                step2: '   ',
                step2Desc: '    .   NFC      .  OLED  \"  \".',
                step3: '  ',
                step3Desc: '      NFC   .        (      ).  OLED  \" ...\"',
                step4: ' ',
                step4Desc: '     OLED \"  \".            ( ).',
                step5: '  ',
                step5Desc: '   (  )          .      .',
                feature1: '  ',
                feature1Desc: '             NFC -     .',
                feature2: '   ',
                feature2Desc: '             .',
                feature3: '    ',
                feature3Desc: '  OLED     \" \" \" \" \"  \"  \"\".',
                feature4: '  ',
                feature4Desc: '          .',
                feature5: '  ',
                feature5Desc: '      Wi-Fi          .',
                feature6: '   ',
                feature6Desc: '          -       .',
                aboutText1: 'Tap2Pay                .      NFC               .',
                aboutText2: '     (  NFC    OLED)      .        (IoT)     .',
                projectBy: ' 2024 Tap2Pay -       ',
                noComments: '   .     !',
                commentTitle: ' ',
                commentText: '...',
                submitComment: ' ',
                reply: '',
                postReply: ' ',
                deleteBtn: '',
                approveBtn: '',
                declineBtn: '',
                pendingStatus: ' ',
                approvedStatus: ' ',
                rejectedStatus: '',
                noPendingSubmissions: '   ',
                noSubmissions: '   ',
                firebaseNotConfigured: '   Firebase.  .',
                logout: ' '
            }
        };

        function t(key) {
            return translations[currentLang][key] || key;
        }

        function applyLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('lang', lang);
            document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
            
            const langToggle = document.getElementById('langToggle');
            if (langToggle) {
                langToggle.textContent = lang === 'en' ? 'AR' : 'EN';
            }
            
            updateTranslations();
        }

        function updateTranslations() {
            // Generic translator for all elements with data-en and data-ar attributes
            const allTranslatableElements = document.querySelectorAll('[data-en][data-ar]');
            allTranslatableElements.forEach(element => {
                if (currentLang === 'en') {
                    element.textContent = element.getAttribute('data-en');
                } else {
                    element.textContent = element.getAttribute('data-ar');
                }
            });
            
            // Auth screen
            const authSubtitle = document.querySelector('.auth-subtitle');
            if (authSubtitle) authSubtitle.textContent = t('authSubtitle');
            
            const selectRole = document.querySelector('#authRole option[value=\"\"]');
            if (selectRole) selectRole.textContent = t('selectRole');
            
            const roleOptions = document.querySelectorAll('#authRole option[value]');
            if (roleOptions[1]) roleOptions[1].textContent = t('roleAdmin');
            if (roleOptions[2]) roleOptions[2].textContent = t('roleTeam');
            if (roleOptions[3]) roleOptions[3].textContent = t('roleVisitor');
            
            const authName = document.getElementById('authName');
            if (authName) authName.placeholder = t('yourName');
            
            const authPassword = document.getElementById('authPassword');
            if (authPassword) authPassword.placeholder = t('password');
            
            const authSubmitBtn = document.getElementById('authSubmitBtn');
            if (authSubmitBtn) authSubmitBtn.textContent = t('signIn');
            
            // Main content
            const subtitle = document.querySelector('.subtitle');
            if (subtitle) subtitle.textContent = t('subtitle');
            
            const sectionTitles = document.querySelectorAll('.section-title');
            if (sectionTitles[0]) sectionTitles[0].textContent = t('mainComponents');
            if (sectionTitles[1]) sectionTitles[1].textContent = t('howItWorks');
            if (sectionTitles[2]) sectionTitles[2].textContent = t('keyFeatures');
            if (sectionTitles[3]) sectionTitles[3].textContent = t('aboutProject');
            if (sectionTitles[4]) sectionTitles[4].textContent = t('teamUpdates');
            if (sectionTitles[5]) sectionTitles[5].textContent = t('adminPanel');
            
            const componentTitles = document.querySelectorAll('.component-title');
            if (componentTitles[0]) componentTitles[0].textContent = t('arduinoTitle');
            if (componentTitles[1]) componentTitles[1].textContent = t('nfcTitle');
            if (componentTitles[2]) componentTitles[2].textContent = t('servoTitle');
            if (componentTitles[3]) componentTitles[3].textContent = t('oledTitle');
            if (componentTitles[4]) componentTitles[4].textContent = t('buttonTitle');
            if (componentTitles[5]) componentTitles[5].textContent = t('breadboardTitle');
            
            const componentDescs = document.querySelectorAll('.component-description');
            if (componentDescs[0]) componentDescs[0].textContent = t('arduinoDesc');
            if (componentDescs[1]) componentDescs[1].textContent = t('nfcDesc');
            if (componentDescs[2]) componentDescs[2].textContent = t('servoDesc');
            if (componentDescs[3]) componentDescs[3].textContent = t('oledDesc');
            if (componentDescs[4]) componentDescs[4].textContent = t('buttonDesc');
            if (componentDescs[5]) componentDescs[5].textContent = t('breadboardDesc');
            
            const stepTitles = document.querySelectorAll('.step-title');
            if (stepTitles[0]) stepTitles[0].textContent = t('step1');
            if (stepTitles[1]) stepTitles[1].textContent = t('step2');
            if (stepTitles[2]) stepTitles[2].textContent = t('step3');
            if (stepTitles[3]) stepTitles[3].textContent = t('step4');
            if (stepTitles[4]) stepTitles[4].textContent = t('step5');
            
            const aboutParas = document.querySelectorAll('.about-section p');
            if (aboutParas[0]) aboutParas[0].textContent = t('aboutText1');
            if (aboutParas[1]) aboutParas[1].textContent = t('aboutText2');
            
            const footer = document.querySelector('.footer');
            if (footer) footer.textContent = t('projectBy');
            
            const titleInput = document.getElementById('feedbackTitle');
            if (titleInput) titleInput.placeholder = t('commentTitle');
            
            const textArea = document.getElementById('feedbackText');
            if (textArea) textArea.placeholder = t('commentText');
            
            // Update sidebar logout button
            const sidebarLogout = document.getElementById('sidebarLogout');
            if (sidebarLogout) {
                const logoutSpan = sidebarLogout.querySelector('span.icon');
                if (logoutSpan) {
                    sidebarLogout.innerHTML = '<span class="icon">' + logoutSpan.innerHTML + '</span> ' + t('logout');
                }
            }
            
            if (typeof loadComments === 'function') {
                loadComments();
            }
            if (typeof loadPendingSubmissions === 'function') {
                loadPendingSubmissions();
            }
            
            // IMPORTANT: Reapply visitor restrictions after language change
            if (typeof updateContentVisibility === 'function') {
                updateContentVisibility();
            }
        }

        // ==================== SMOOTH SCROLL & PAGE LOAD EFFECTS ==================== //
        // Ensure smooth animations on page load
        window.addEventListener('load', function() {
            // Animation triggers are handled by CSS
            console.log('Tap2Pay website loaded successfully!');
            checkStoredLogin();
            initFeedbackSystem();
            
            // Apply saved language or default to English
            applyLanguage(currentLang);
            
            // Language toggle button
            const langToggle = document.getElementById('langToggle');
            if (langToggle) {
                langToggle.addEventListener('click', function() {
                    const newLang = currentLang === 'en' ? 'ar' : 'en';
                    applyLanguage(newLang);
                });
            }
        });

        // ==================== PREVENT SCROLLING INTERFERENCE ==================== //
        // Smooth scroll behavior for better UX
        document.documentElement.style.scrollBehavior = 'smooth';

        // ==================== FIREBASE CONFIGURATION ==================== //
        const firebaseConfig = {
            apiKey: "AIzaSyC6yVkSQT4gn47YIo5UAJzgVEGlfHaFsTE",
            authDomain: "tap2pay-c4bae.firebaseapp.com",
            projectId: "tap2pay-c4bae",
            storageBucket: "tap2pay-c4bae.firebasestorage.app",
            messagingSenderId: "843180266943",
            appId: "1:843180266943:web:03d4fec1918a3180247d0a",
            measurementId: "G-5CZ7BPWXN5",
            databaseURL: "https://tap2pay-c4bae-default-rtdb.firebaseio.com"
        };

        // Initialize Firebase (if available)
        let database = null;
        let auth = null;
        let currentAdminUser = null;
        let currentUserRole = null;
        let currentUserName = '';
        let isLoadingComments = false; // Prevent duplicate loads
        let feedbackSystemInitialized = false; // Prevent multiple initialization

        // Role passwords
        const ROLE_PASSWORDS = {
            'Admin': 'boba3213',
            'Team': 'zzbOnTop',
            'Visitor': 'visitors'
        };

        // Check if user is already logged in from localStorage
        function checkStoredLogin() {
            const storedRole = localStorage.getItem('userRole');
            const storedName = localStorage.getItem('userName');
            
            if (storedRole && storedName) {
                currentUserRole = storedRole;
                currentUserName = storedName;
                loginUser(storedRole, storedName);
            }
        }

        // Initialize Firebase if script is loaded
        if (typeof firebase !== 'undefined') {
            firebase.initializeApp(firebaseConfig);
            database = firebase.database();
            auth = firebase.auth();
        }

        // ==================== AUTHENTICATION SYSTEM ==================== //
        const authScreen = document.getElementById('authScreen');
        const authForm = document.getElementById('authForm');
        const authRole = document.getElementById('authRole');
        const authName = document.getElementById('authName');
        const authPassword = document.getElementById('authPassword');
        const authSubmitBtn = document.getElementById('authSubmitBtn');
        const authError = document.getElementById('authError');
        const mainContent = document.getElementById('mainContent');

        // Handle authentication form
        authForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const role = authRole.value;
            const name = authName.value.trim();
            const password = authPassword.value.trim();

            if (!role) {
                showAuthError('Please select a role');
                return;
            }

            if (!name) {
                showAuthError('Please enter your name');
                return;
            }

            if (!password) {
                showAuthError('Please enter the password');
                return;
            }

            // Check if password matches the selected role
            if (password === ROLE_PASSWORDS[role]) {
                loginUser(role, name);
                // Clear form
                authRole.value = '';
                authName.value = '';
                authPassword.value = '';
            } else {
                showAuthError('Incorrect password for ' + role);
            }
        });

        function showAuthError(message) {
            authError.textContent = ' ' + message;
            authError.classList.add('show');
        }

        function loginUser(role, name) {
            currentUserRole = role;
            currentUserName = name;
            
            // Save to localStorage for persistence
            localStorage.setItem('userRole', role);
            localStorage.setItem('userName', name);

            // Update sidebar user info
            updateSidebarUser();

            // Show main content
            authScreen.classList.add('hidden');
            mainContent.classList.add('visible');

            // Show/hide sections based on role
            updateContentVisibility();

            // Initialize feedback system
            initFeedbackSystem();
        }

        function updateContentVisibility() {
            // Get all text elements
            const componentDescriptions = document.querySelectorAll('.component-description');
            const stepTexts = document.querySelectorAll('.step-text');
            const featureTexts = document.querySelectorAll('.feature-text');

            if (currentUserRole === 'Visitor') {
                // Wrap text and add blur + label
                const wrapAndBlur = (element) => {
                    if (!element.querySelector('.text-wrapper')) {
                        const wrapper = document.createElement('div');
                        wrapper.className = 'text-wrapper';
                        
                        const content = document.createElement('span');
                        content.className = 'blurred-text';
                        content.textContent = element.textContent;
                        
                        const label = document.createElement('span');
                        label.className = 'restricted-label';
                        label.textContent = ' Restricted';
                        
                        wrapper.appendChild(content);
                        wrapper.appendChild(label);
                        
                        element.textContent = '';
                        element.appendChild(wrapper);
                    }
                };
                
                componentDescriptions.forEach(wrapAndBlur);
                stepTexts.forEach(wrapAndBlur);
                featureTexts.forEach(wrapAndBlur);
            } else {
                // Remove wrappers and restore original text
                const unwrap = (element) => {
                    const wrapper = element.querySelector('.text-wrapper');
                    if (wrapper) {
                        const blurredText = wrapper.querySelector('.blurred-text');
                        if (blurredText) {
                            element.textContent = blurredText.textContent;
                        }
                    }
                };
                
                componentDescriptions.forEach(unwrap);
                stepTexts.forEach(unwrap);
                featureTexts.forEach(unwrap);
            }
        }

        // Function to handle logout
        function performLogout() {
            currentUserName = '';
            currentUserRole = null;
            // Clear localStorage
            localStorage.removeItem('userRole');
            localStorage.removeItem('userName');
            authRole.value = '';
            authName.value = '';
            authPassword.value = '';
            authScreen.classList.remove('hidden');
            mainContent.classList.remove('visible');
            
            // Close sidebar if open
            const sidebar = document.getElementById('sidebar');
            const sidebarOverlay = document.getElementById('sidebarOverlay');
            if (sidebar) sidebar.classList.remove('active');
            if (sidebarOverlay) sidebarOverlay.classList.remove('active');
        }

        // ==================== FEEDBACK SYSTEM ==================== //
        function initFeedbackSystem() {
            if (feedbackSystemInitialized) return; // Prevent duplicate initialization
            feedbackSystemInitialized = true;
            const feedbackBtn = document.getElementById('feedbackBtn');
            const feedbackModal = document.getElementById('feedbackModal');
            const closeModal = document.getElementById('closeModal');
            const feedbackForm = document.getElementById('feedbackForm');
            const submitBtn = document.getElementById('submitBtn');
            const errorMsg = document.getElementById('errorMessage');
            const successMsg = document.getElementById('successMessage');

            // Open modal
            feedbackBtn.addEventListener('click', () => {
                feedbackModal.classList.add('active');
                // Remove all listeners before loading
                firebase.database().ref('suggestions').off();
                loadComments();
                checkAdminStatus();
            });

            // Close modal
            closeModal.addEventListener('click', () => {
                feedbackModal.classList.remove('active');
            });

            // Close on overlay click
            feedbackModal.addEventListener('click', (e) => {
                if (e.target === feedbackModal) {
                    feedbackModal.classList.remove('active');
                }
            });

            // Submit form
            feedbackForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                await submitFeedback();
            });

            // Greeting detection for suggestion text input
            const suggestionTextInput = document.getElementById('suggestionText');
            const greetingMessage = document.getElementById('greetingMessage');
            const GREETING_PATTERNS = ['hello', 'hi', 'hey', 'greetings', 'good morning', 'good afternoon', 'good evening'];
            const MAX_GREETING_LENGTH = 50;
            const GREETING_AUTO_HIDE_MS = 5000;
            let greetingTimeout;

            suggestionTextInput.addEventListener('input', (e) => {
                const text = e.target.value.trim().toLowerCase();
                
                // Check if the text matches any greeting pattern
                // Supports greetings with common punctuation (space, comma, exclamation, question, period)
                const isGreeting = GREETING_PATTERNS.some(pattern => {
                    return text === pattern || 
                           text.startsWith(pattern + ' ') || 
                           text.startsWith(pattern + ',') ||
                           text.startsWith(pattern + '!') ||
                           text.startsWith(pattern + '?') ||
                           text.startsWith(pattern + '.');
                });

                if (isGreeting && text.length < MAX_GREETING_LENGTH) {
                    // Clear previous timeout if exists
                    if (greetingTimeout) {
                        clearTimeout(greetingTimeout);
                    }
                    
                    // Show greeting message
                    greetingMessage.classList.add('show');
                    
                    // Auto-hide after configured time
                    greetingTimeout = setTimeout(() => {
                        greetingMessage.classList.remove('show');
                    }, GREETING_AUTO_HIDE_MS);
                } else {
                    // Hide greeting message immediately
                    greetingMessage.classList.remove('show');
                    
                    // Clear any pending timeout
                    if (greetingTimeout) {
                        clearTimeout(greetingTimeout);
                        greetingTimeout = null;
                    }
                }
            });

            // Admin login modal
            const adminLoginModal = document.getElementById('adminLoginModal');
            const adminLoginSubmit = document.getElementById('adminLoginSubmit');
            const adminLoginCancel = document.getElementById('adminLoginCancel');
            const roleSelect = document.getElementById('roleSelect');
            const userName = document.getElementById('userName');

            // Cancel login
            adminLoginCancel.addEventListener('click', () => {
                adminLoginModal.classList.remove('active');
            });

            // Close modal on overlay click
            adminLoginModal.addEventListener('click', (e) => {
                if (e.target === adminLoginModal) {
                    adminLoginModal.classList.remove('active');
                }
            });

            // Submit login
            adminLoginSubmit.addEventListener('click', async () => {
                const roleSelect = document.getElementById('roleSelect');
                const userName = document.getElementById('userName');
                const role = roleSelect.value;
                const name = userName.value.trim();
                const password = adminPassword.value.trim();
                
                if (!role) {
                    alert('Please select a role');
                    return;
                }
                
                if (!name) {
                    alert('Please enter your name');
                    return;
                }
                
                if (!password) {
                    alert('Please enter the password');
                    return;
                }

                // Check if password matches the selected role
                if (password === ROLE_PASSWORDS[role]) {
                    alert(' Login successful!');
                    adminLoginModal.classList.remove('active');
                    loginUser(role, name);
                    if (role === 'Admin') {
                        checkAdminStatus();
                    }
                    // Clear form
                    roleSelect.value = '';
                    userName.value = '';
                    adminPassword.value = '';
                } else {
                    alert(' Incorrect password for ' + role);
                }
            });

            // Enter key to submit login
            adminPassword.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    adminLoginSubmit.click();
                }
            });

            // Load initial comments and pending count
            loadPendingCount();
        }

        // Submit feedback to Realtime Database
        async function submitFeedback() {
            const submitBtn = document.getElementById('submitBtn');
            const spinner = document.getElementById('spinner');
            const errorMsg = document.getElementById('errorMessage');
            const successMsg = document.getElementById('successMessage');
            const form = document.getElementById('feedbackForm');

            const title = document.getElementById('suggestionTitle').value.trim();
            const text = document.getElementById('suggestionText').value.trim();

            if (!title || !text) {
                showError('Please fill in all fields');
                return;
            }

            if (submitBtn) submitBtn.disabled = true;
            if (spinner) spinner.style.display = 'inline-block';
            if (errorMsg) errorMsg.classList.remove('show');
            if (successMsg) successMsg.classList.remove('show');

            try {
                if (database) {
                    const newRef = firebase.database().ref('suggestions').push();
                    await newRef.set({
                        title: title,
                        text: text,
                        userName: currentUserName,
                        status: 'pending',
                        timestamp: firebase.database.ServerValue.TIMESTAMP,
                        ip: 'anonymous'
                    });

                    // Show success
                    if (successMsg) successMsg.classList.add('show');
                    if (form) form.reset();

                    // Reload comments and pending count
                    setTimeout(() => {
                        loadComments();
                        loadPendingCount();
                        if (successMsg) successMsg.classList.remove('show');
                    }, 2000);
                } else {
                    // Firebase not configured
                    showError('Firebase not configured. Setup required.');
                }
            } catch (error) {
                console.error('Error submitting feedback:', error);
                showError('Failed to submit. Please try again.');
            } finally {
                if (submitBtn) submitBtn.disabled = false;
                if (spinner) spinner.style.display = 'none';
            }
        }

        // Load all comments from Realtime Database (with status badges)
        function loadComments() {
            const commentsList = document.getElementById('commentsList');

            if (!database || isLoadingComments) {
                return;
            }

            isLoadingComments = true;

            // Use .once() to load data once without persistent listener
            firebase.database().ref('suggestions').orderByChild('timestamp').once('value', (snapshot) => {
                if (!snapshot.exists()) {
                    commentsList.innerHTML = '<div class="no-comments">No submissions yet.</div>';
                    return;
                }

                const comments = [];
                snapshot.forEach((childSnapshot) => {
                    const data = childSnapshot.val();
                    comments.push({
                        id: childSnapshot.key,
                        ...data
                    });
                });

                if (comments.length === 0) {
                    commentsList.innerHTML = '<div class="no-comments">No submissions yet.</div>';
                    return;
                }

                // Sort by timestamp descending
                comments.sort((a, b) => (b.timestamp || 0) - (a.timestamp || 0));

                commentsList.innerHTML = '';
                comments.forEach((comment, index) => {
                    const date = comment.timestamp 
                        ? new Date(comment.timestamp).toLocaleDateString() 
                        : 'Unknown';
                    
                    // Status badge
                    let statusBadge = '';
                    let cardStyle = '';
                    if (comment.status === 'approved') {
                        statusBadge = `<span style="background: var(--primary-color); color: var(--text-color); padding: 4px 12px; border-radius: 20px; font-size: 0.75rem; font-weight: bold;"> APPROVED</span>`;
                    } else if (comment.status === 'rejected') {
                        statusBadge = `<span style="background: var(--primary-color); color: var(--text-color); padding: 4px 12px; border-radius: 20px; font-size: 0.75rem; font-weight: bold;"> DECLINED</span>`;
                        cardStyle = `opacity: 0.6; border-left: 3px solid var(--primary-color);`;
                    } else if (comment.status === 'pending') {
                        statusBadge = `<span style="background: var(--primary-color); color: var(--text-color); padding: 4px 12px; border-radius: 20px; font-size: 0.75rem; font-weight: bold;"> PENDING</span>`;
                        cardStyle = `border-left: 3px solid var(--primary-color);`;
                    }

                    const deleteBtn = currentUserRole === 'Admin' 
                        ? `<button class="decline-btn" style="padding: 4px 8px; font-size: 0.75rem; margin-left: auto;" onclick="deleteComment('${comment.id}')"> Delete</button>` 
                        : '';

                    const repliesArray = comment.replies
                        ? Object.values(comment.replies).sort((a, b) => (a.timestamp || 0) - (b.timestamp || 0))
                        : [];

                    const repliesHtml = repliesArray.length
                        ? repliesArray.map(reply => `
                            <div style="margin-top: 6px; padding-left: 10px; border-left: 2px solid rgba(var(--primary-rgb), 0.3);">
                                <div style="font-size: 0.85rem; color: var(--text-secondary);">${escapeHtml(reply.text)}</div>
                                <div style="font-size: 0.75rem; color: var(--text-muted); margin-top: 2px;"> <strong>${escapeHtml(reply.userName || 'Anonymous')}</strong>  ${reply.timestamp ? new Date(reply.timestamp).toLocaleDateString() : 'Unknown'}</div>
                            </div>
                        `).join('')
                        : '<div style="font-size: 0.8rem; color: var(--text-light); margin-top: 6px;">No replies yet.</div>';

                    const html = `
                        <div class="comment-card" style="animation-delay: ${index * 0.1}s; ${cardStyle}">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                <strong style="color: var(--primary-color);">${escapeHtml(comment.title)}</strong>
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    ${statusBadge}
                                    ${deleteBtn}
                                </div>
                            </div>
                            <div class="comment-text">${escapeHtml(comment.text)}</div>
                            <div style="font-size: 0.85rem; color: var(--text-muted); margin-top: 6px;"> <strong>${escapeHtml(comment.userName || 'Anonymous')}</strong></div>
                            <div class="comment-date"> ${date}</div>
                            <div style="margin-top: 10px; padding-top: 10px; border-top: 1px solid rgba(var(--primary-rgb), 0.1);">
                                <div style="font-size: 0.85rem; font-weight: 600; margin-bottom: 6px; color: var(--text-secondary);">Replies</div>
                                <div>${repliesHtml}</div>
                                <div style="display: flex; gap: 8px; margin-top: 10px;">
                                    <input type="text" id="reply-${comment.id}" class="auth-input" placeholder="Write a reply..." style="flex: 1; padding: 8px 10px; font-size: 0.85rem;" />
                                    <button class="submit-btn" style="padding: 8px 12px; font-size: 0.75rem;" onclick="submitReply('${comment.id}')">Reply</button>
                                </div>
                            </div>
                        </div>
                    `;
                    commentsList.innerHTML += html;
                });
                isLoadingComments = false;
            });
        }

        // Load pending count from Realtime Database
        function loadPendingCount() {
            const badgeCount = document.getElementById('badgeCount');

            if (!database) {
                badgeCount.style.display = 'none';
                return;
            }

            // Use .once() to load data once without persistent listener
            firebase.database().ref('suggestions').once('value', (snapshot) => {
                if (!snapshot.exists()) {
                    badgeCount.style.display = 'none';
                    return;
                }

                let count = 0;
                snapshot.forEach((childSnapshot) => {
                    const data = childSnapshot.val();
                    if (data.status === 'pending') {
                        count++;
                    }
                });

                if (count > 0) {
                    badgeCount.textContent = count;
                    badgeCount.style.display = 'flex';
                } else {
                    badgeCount.style.display = 'none';
                }
            });
        }

        // Check admin status
        function checkAdminStatus() {
            const adminPanel = document.getElementById('adminPanel');

            if (currentUserRole === 'Admin') {
                adminPanel.classList.add('active');
                loadPendingSubmissions();

                document.getElementById('logoutAdmin').addEventListener('click', () => {
                    adminPanel.classList.remove('active');
                    location.reload();
                });
            } else {
                adminPanel.classList.remove('active');
            }
        }

        // Load pending submissions for admin from Realtime Database
        function loadPendingSubmissions() {
            const pendingContainer = document.getElementById('pendingSubmissions');

            if (!database || currentUserRole !== 'Admin') {
                return;
            }

            // Use .once() to load data once without persistent listener
            firebase.database().ref('suggestions').orderByChild('timestamp').once('value', (snapshot) => {
                if (!snapshot.exists()) {
                    pendingContainer.innerHTML = '<div class="no-comments">No pending submissions</div>';
                    return;
                }

                const pending = [];
                snapshot.forEach((childSnapshot) => {
                    const data = childSnapshot.val();
                    if (data.status === 'pending') {
                        pending.push({
                            id: childSnapshot.key,
                            ...data
                        });
                    }
                });

                pendingContainer.innerHTML = '';

                if (pending.length === 0) {
                    pendingContainer.innerHTML = '<div class="no-comments">No pending submissions</div>';
                    return;
                }

                // Sort by timestamp ascending (oldest first)
                pending.sort((a, b) => (a.timestamp || 0) - (b.timestamp || 0));

                pending.forEach((item) => {
                    const date = item.timestamp 
                        ? new Date(item.timestamp).toLocaleDateString() 
                        : 'Unknown';
                    const html = `
                        <div class="pending-item">
                            <strong style="color: var(--primary-color);">${escapeHtml(item.title)}</strong>
                            <div class="pending-text">${escapeHtml(item.text)}</div>
                            <div class="pending-meta"> ${date}</div>
                            <div class="admin-buttons">
                                <button class="approve-btn" onclick="approveSubmission('${item.id}')"> Approve</button>
                                <button class="decline-btn" onclick="declineSubmission('${item.id}')"> Decline</button>
                            </div>
                        </div>
                    `;
                    pendingContainer.innerHTML += html;
                });
            });
        }

        // Approve submission in Realtime Database
        async function approveSubmission(docId) {
            if (!database || currentUserRole !== 'Admin') return;

            try {
                await firebase.database().ref(`suggestions/${docId}`).update({
                    status: 'approved'
                });
                loadComments();
                loadPendingCount();
            } catch (error) {
                console.error('Error approving submission:', error);
            }
        }

        // Decline submission in Realtime Database
        async function declineSubmission(docId) {
            if (!database || currentUserRole !== 'Admin') return;

            try {
                await firebase.database().ref(`suggestions/${docId}`).update({
                    status: 'rejected'
                });
                loadComments();
                loadPendingCount();
            } catch (error) {
                console.error('Error declining submission:', error);
            }
        }

        // Delete comment
        async function deleteComment(docId) {
            if (currentUserRole !== 'Admin') return;

            if (confirm('Are you sure you want to delete this comment?')) {
                try {
                    await firebase.database().ref(`suggestions/${docId}`).remove();
                    loadComments();
                } catch (error) {
                    console.error('Error deleting comment:', error);
                }
            }
        }

        // Submit reply
        async function submitReply(commentId) {
            if (!database) return;

            const input = document.getElementById(`reply-${commentId}`);
            if (!input) return;

            const text = input.value.trim();
            if (!text) return;

            const replyRef = firebase.database().ref(`suggestions/${commentId}/replies`).push();
            try {
                await replyRef.set({
                    text: text,
                    userName: currentUserName || 'Anonymous',
                    timestamp: firebase.database.ServerValue.TIMESTAMP
                });
                input.value = '';
                loadComments();
            } catch (error) {
                console.error('Error submitting reply:', error);
            }
        }

        // Show error message
        function showError(message) {
            const errorMsg = document.getElementById('errorMessage');
            errorMsg.textContent = ' ' + message;
            errorMsg.classList.add('show');
            setTimeout(() => {
                errorMsg.classList.remove('show');
            }, 4000);
        }

        // Escape HTML to prevent XSS
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // ==================== SIDEBAR & THEME SYSTEM ==================== //
        const hamburgerBtn = document.getElementById('hamburgerBtn');
        const sidebar = document.getElementById('sidebar');
        const sidebarOverlay = document.getElementById('sidebarOverlay');
        const settingsPanel = document.getElementById('settingsPanel');
        const darkModeToggle = document.getElementById('darkModeToggle');
        const primaryColorPicker = document.getElementById('primaryColorPicker');
        const resetThemeBtn = document.getElementById('resetThemeBtn');
        const sidebarUsername = document.getElementById('sidebarUsername');
        const sidebarRoleBadge = document.getElementById('sidebarRoleBadge');
        const sidebarLogout = document.getElementById('sidebarLogout');
        const logoutDivider = document.getElementById('logoutDivider');

        // Default theme colors (single primary color)
        const defaultTheme = {
            primaryColor: '#FF3B3B',
            darkMode: true
        };

        // Load theme on page load
        function loadTheme() {
            const savedTheme = localStorage.getItem('userTheme');
            if (savedTheme) {
                const theme = JSON.parse(savedTheme);
                applyTheme(theme);
            } else {
                applyTheme(defaultTheme);
            }
        }

        // Helper function to convert hex color to RGB values
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}` : '255, 59, 59';
        }

        // Apply theme
        function applyTheme(theme) {
            // Convert hex color to RGB for use in rgba() values
            const primaryRgb = hexToRgb(theme.primaryColor);
            
            // Set CSS variables with new names
            document.documentElement.style.setProperty('--primary-color', theme.primaryColor);
            document.documentElement.style.setProperty('--primary-rgb', primaryRgb);
            
            // Update shadow and glow variables with new primary color
            document.documentElement.style.setProperty('--shadow-sm', `0 0 10px rgba(${primaryRgb}, 0.3)`);
            document.documentElement.style.setProperty('--shadow-md', `0 0 15px rgba(${primaryRgb}, 0.3)`);
            document.documentElement.style.setProperty('--shadow-lg', `0 0 20px rgba(${primaryRgb}, 0.4)`);
            document.documentElement.style.setProperty('--shadow-xl', `0 10px 30px rgba(${primaryRgb}, 0.2)`);
            document.documentElement.style.setProperty('--shadow-pulse', `0 0 0 0 rgba(${primaryRgb}, 0.7)`);
            document.documentElement.style.setProperty('--glow', `0 0 20px rgba(${primaryRgb}, 0.5)`);
            document.documentElement.style.setProperty('--glow-sm', `0 0 10px rgba(${primaryRgb}, 0.4)`);
            document.documentElement.style.setProperty('--glow-lg', `0 0 30px rgba(${primaryRgb}, 0.6)`);
            
            // Update border colors with new primary color
            document.documentElement.style.setProperty('--border-color', `rgba(${primaryRgb}, 0.2)`);
            document.documentElement.style.setProperty('--border-color-light', `rgba(${primaryRgb}, 0.1)`);
            document.documentElement.style.setProperty('--border-color-dark', `rgba(${primaryRgb}, 0.3)`);

            // Apply dark/light mode
            if (theme.darkMode) {
                document.body.classList.remove('light-mode');
                document.body.classList.add('dark-mode');
                darkModeToggle.checked = true;
                document.documentElement.style.setProperty('--text-color', '#ffffff');
                document.documentElement.style.setProperty('--text-primary', '#ffffff');
                document.documentElement.style.setProperty('--text-secondary', 'rgba(255, 255, 255, 0.7)');
                document.documentElement.style.setProperty('--bg-main', '#0f0f0f');
                document.documentElement.style.setProperty('--bg-main-alt', '#1a1a1a');
                document.documentElement.style.setProperty('--section-text-color', '#ffffff');
            } else {
                document.body.classList.remove('dark-mode');
                document.body.classList.add('light-mode');
                darkModeToggle.checked = false;
                // LIGHT MODE: ALL TEXT MUST BE WHITE (#FFFFFF)
                document.documentElement.style.setProperty('--text-color', '#ffffff');
                document.documentElement.style.setProperty('--text-primary', '#ffffff');
                document.documentElement.style.setProperty('--text-secondary', '#ffffff');
                document.documentElement.style.setProperty('--text-muted', '#ffffff');
                document.documentElement.style.setProperty('--text-light', '#ffffff');
                document.documentElement.style.setProperty('--bg-main', '#f5f5f5');
                document.documentElement.style.setProperty('--bg-main-alt', '#ffffff');
                document.documentElement.style.setProperty('--section-text-color', '#ffffff');
            }

            // Update color picker
            primaryColorPicker.value = theme.primaryColor;

            // Save to localStorage
            localStorage.setItem('userTheme', JSON.stringify(theme));
        }

        // Sidebar toggle
        hamburgerBtn.addEventListener('click', () => {
            sidebar.classList.toggle('active');
            sidebarOverlay.classList.toggle('active');
        });

        // Close sidebar on overlay click
        sidebarOverlay.addEventListener('click', () => {
            sidebar.classList.remove('active');
            sidebarOverlay.classList.remove('active');
            settingsPanel.classList.remove('active');
        });

        // Settings link
        document.querySelectorAll('.settings-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                settingsPanel.classList.add('active');
            });
        });

        // Back button in settings
        document.querySelector('.settings-header').addEventListener('click', () => {
            settingsPanel.classList.remove('active');
        });

        // Dark mode toggle
        darkModeToggle.addEventListener('change', () => {
            const currentTheme = JSON.parse(localStorage.getItem('userTheme')) || defaultTheme;
            currentTheme.darkMode = darkModeToggle.checked;
            applyTheme(currentTheme);
        });
        // Color picker changes (real-time with 'input' and final with 'change')
        primaryColorPicker.addEventListener('input', () => {
            const currentTheme = JSON.parse(localStorage.getItem('userTheme')) || defaultTheme;
            currentTheme.primaryColor = primaryColorPicker.value;
            
            // Apply immediately with RGB conversion
            const primaryRgb = hexToRgb(primaryColorPicker.value);
            document.documentElement.style.setProperty('--primary-color', primaryColorPicker.value);
            document.documentElement.style.setProperty('--primary-rgb', primaryRgb);
            document.documentElement.style.setProperty('--shadow-sm', `0 0 10px rgba(${primaryRgb}, 0.3)`);
            document.documentElement.style.setProperty('--shadow-md', `0 0 15px rgba(${primaryRgb}, 0.3)`);
            document.documentElement.style.setProperty('--shadow-lg', `0 0 20px rgba(${primaryRgb}, 0.4)`);
            document.documentElement.style.setProperty('--shadow-xl', `0 10px 30px rgba(${primaryRgb}, 0.2)`);
            document.documentElement.style.setProperty('--shadow-pulse', `0 0 0 0 rgba(${primaryRgb}, 0.7)`);
            document.documentElement.style.setProperty('--glow', `0 0 20px rgba(${primaryRgb}, 0.5)`);
            document.documentElement.style.setProperty('--glow-sm', `0 0 10px rgba(${primaryRgb}, 0.4)`);
            document.documentElement.style.setProperty('--glow-lg', `0 0 30px rgba(${primaryRgb}, 0.6)`);
            document.documentElement.style.setProperty('--border-color', `rgba(${primaryRgb}, 0.2)`);
            document.documentElement.style.setProperty('--border-color-light', `rgba(${primaryRgb}, 0.1)`);
            document.documentElement.style.setProperty('--border-color-dark', `rgba(${primaryRgb}, 0.3)`);
        });

        primaryColorPicker.addEventListener('change', () => {
            const currentTheme = JSON.parse(localStorage.getItem('userTheme')) || defaultTheme;
            currentTheme.primaryColor = primaryColorPicker.value;
            applyTheme(currentTheme);
        });

        // Reset theme
        resetThemeBtn.addEventListener('click', () => {
            applyTheme(defaultTheme);
            alert('Theme reset to default!');
        });

        // Update sidebar user info when logged in
        function updateSidebarUser() {
            if (currentUserRole && currentUserName) {
                sidebarUsername.textContent = currentUserName;
                sidebarRoleBadge.textContent = currentUserRole.toUpperCase();
                sidebarRoleBadge.className = `role-badge ${currentUserRole.toLowerCase()}`;
                sidebarLogout.style.display = 'flex';
                logoutDivider.style.display = 'block';
            }
        }
        // Sidebar logout with confirmation
        sidebarLogout.addEventListener('click', (e) => {
            e.preventDefault();
            
            // Create confirmation dialog
            const confirmDialog = document.createElement('div');
            confirmDialog.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                animation: fadeIn 0.3s ease;
            `;
            
            const dialogContent = document.createElement('div');
            dialogContent.style.cssText = `
                background: linear-gradient(135deg, #2a2a2a 0%, #1f1f1f 100%);
                color: var(--text-primary);
                padding: 30px;
                border-radius: 12px;
                text-align: center;
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
                max-width: 300px;
                animation: slideUp 0.3s ease;
                border: 1px solid var(--primary-color);
            `;
            
            dialogContent.innerHTML = `
                <h3 style="margin: 0 0 15px 0; font-size: 1.2rem;">Confirm Logout</h3>
                <p style="margin: 0 0 25px 0; opacity: 0.8;">Are you sure you want to logout?</p>
                <div style="display: flex; gap: 10px; justify-content: center;">
                    <button class="confirm-btn" style="
                        background: var(--primary-color);
                        color: white;
                        border: none;
                        padding: 10px 20px;
                        border-radius: 6px;
                        cursor: pointer;
                        font-weight: 600;
                        transition: all 0.3s ease;
                    ">Yes, Logout</button>
                    <button class="cancel-btn" style="
                        background: var(--card-bg);
                        color: var(--text-primary);
                        border: 1px solid var(--primary-color);
                        padding: 10px 20px;
                        border-radius: 6px;
                        cursor: pointer;
                        font-weight: 600;
                        transition: all 0.3s ease;
                    ">Cancel</button>
                </div>
            `;
            
            confirmDialog.appendChild(dialogContent);
            document.body.appendChild(confirmDialog);
            
            const confirmBtn = dialogContent.querySelector('.confirm-btn');
            const cancelBtn = dialogContent.querySelector('.cancel-btn');
            
            confirmBtn.addEventListener('click', () => {
                confirmDialog.remove();
                performLogout();
            });
            
            confirmBtn.addEventListener('mouseover', () => {
                confirmBtn.style.boxShadow = '0 0 20px rgba(var(--primary-rgb), 0.6)';
                confirmBtn.style.transform = 'translateY(-2px)';
            });
            
            confirmBtn.addEventListener('mouseout', () => {
                confirmBtn.style.boxShadow = 'none';
                confirmBtn.style.transform = 'translateY(0)';
            });
            
            cancelBtn.addEventListener('click', () => {
                confirmDialog.remove();
            });
            
            cancelBtn.addEventListener('mouseover', () => {
                cancelBtn.style.background = 'rgba(211, 47, 47, 0.1)';
            });
            
            cancelBtn.addEventListener('mouseout', () => {
                cancelBtn.style.background = 'var(--card-bg)';
            });
        });

        // Menu item clicks close sidebar
        document.querySelectorAll('.menu-item:not(.settings-link)').forEach(item => {
            item.addEventListener('click', () => {
                sidebar.classList.remove('active');
                sidebarOverlay.classList.remove('active');
            });
        });

        // Load theme on page load
        loadTheme();
    </script>

    <!-- Language Toggle Button -->
    <button class="lang-toggle" id="langToggle">AR</button>

</body>
</html>



